<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Главная страница</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body { background-color: #f5f5f7; }

        .hero {
            padding: 3rem 1.5rem;
            border-radius: 1.5rem;
            background: linear-gradient(135deg, #0d6efd, #6610f2);
            color: #fff;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeUp .6s forwards ease-out;
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">

        <a class="navbar-brand" href="{% url 'home' %}">Новости Узбекистана</a>

        <div class="ms-auto d-flex align-items-center">

            {% if user.is_authenticated %}

                <span class="navbar-text me-3">Здравствуйте, {{ user.username }}</span>

                <a href="{% url 'news_add' %}" class="btn btn-warning btn-sm me-2">
                    Добавить новость
                </a>

                <form method="post" action="{% url 'logout' %}" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-light btn-sm">Выйти</button>
                </form>

            {% else %}
                <a href="{% url 'login' %}" class="btn btn-outline-light btn-sm me-2">Войти</a>
                <a href="{% url 'register' %}" class="btn btn-warning btn-sm">Регистрация</a>
            {% endif %}

        </div>
    </div>
</nav>


<main class="container my-4">

    <section class="hero mb-4">
        <h1 class="display-5">Лента новостей</h1>
        <p class="lead">Новости по категориям</p>
    </section>

    <!-- Категории -->
    <section class="mb-5">
        <h2 class="h5 text-muted">Категории</h2>

        <div class="d-flex flex-wrap gap-2">
            {% for c in categories %}
                <a href="{% url 'category_detail' c.id %}"
                   class="badge text-bg-primary rounded-pill text-decoration-none">
                    {{ c.category_name }}
                </a>
            {% endfor %}
        </div>
    </section>

    <!-- Новости -->
    <section>
        <h2 class="h5 text-muted mb-3">Последние новости</h2>

        <div class="row g-4">
            {% for n in news %}
                <div class="col-md-6 col-lg-4">
                    <div class="card shadow-sm h-100">

                        <div class="card-body d-flex flex-column">

                            <h3 class="h5">{{ n.title }}</h3>

                            <span class="badge text-bg-secondary mb-2">
                                {{ n.news_category.category_name }}
                            </span>

                            <p class="text-muted">{{ n.content|truncatechars:120 }}</p>

                            <div class="mt-auto d-flex justify-content-between">
                                <small class="text-muted">{{ n.date_added|date:"d.m.Y H:i" }}</small>

                                <a class="btn btn-primary btn-sm"
                                   href="{% url 'news_detail' n.id %}">
                                    Читать
                                </a>
                            </div>

                        </div>

                    </div>
                </div>
            {% endfor %}
        </div>
    </section>

</main>

</body>
</html>
